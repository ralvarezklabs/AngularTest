language: node_js
node_js:
  - "14"
dist: trusty
sudo: required
git:
  # Desactivar la verificación del certificado SSL
  # para evitar el error "server certificate verification failed"
  depth: false
branches:
  only:
    - pivot
addons:
  chrome: stable
cache:
  directories:
    - node_modules
before_install:
  # No verificar el certificado SSL
  - git config --global http.sslVerify false
  - apt-get update
  - apt-get install -y ca-certificates
  - export GIT_SSL_NO_VERIFY=true
  - npm config set progress false
install:
  - npm install
script:
  - ng test --watch=false --browsers=ChromeHeadless
  
# Notificaciones de resultado de compilación
notifications:
  email:
    recipients:
      - ralvarez@kreilabs.com
    on_success: always # siempre notificar cuando la compilación tiene éxito
    on_failure: always # siempre notificar cuando la compilación falla
